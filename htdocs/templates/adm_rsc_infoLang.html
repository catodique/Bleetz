<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" ><!-- InstanceBegin template="/Templates/admin.dwt" codeOutsideHTMLIsLocked="false" -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<title>Economissimo</title>
<script type="text/javascript"> var page_signature="{$page_signature}"; </script>
<script type="text/javascript" src="../dev/jquery.10.0.min.js"></script>
<script type="text/javascript" src="../dev/jquery-ui-1.10.3.custom.min.js"></script>
<script type="text/javascript" src="../dev/EasyCheck.min.js"></script>
<script type="text/javascript" src="../dev/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="../dev/jquery.form.js"></script>
<script type="text/javascript" src="../dev/FormUpload.js"></script>
<script type="text/javascript" src="../dev/app.js"></script>
<link href="../css/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" type="text/css" />
<link href="../css/EasyCheck.css" rel="stylesheet" type="text/css" />
<link href="../css/table.css" rel="stylesheet" type="text/css" />
<link href="../css/FormUpload.css" rel="stylesheet" type="text/css" />
<link href="../css/boxCommerce.css" rel="stylesheet" type="text/css" />
<link href="../css/app.css" rel="stylesheet" type="text/css" />
<link rel="stylesheet" type="text/css" media="screen" href="../css/liquid-slider.css" />
    <script src="../dev/jquery.easing.1.3.js"></script>
    <script src="../dev/jquery.liquid-slider.js"></script>
<!-- InstanceBeginEditable name="head" -->
<!-- script-->
  <bleetz:block name="content">


	$(function () {

openPopup () ;
	});
</script>
</bleetz:block>
<!-- InstanceEndEditable -->
</head>
<body >
<div style="text-align:center; ">
  <div style="text-align:left; width:1080px; display:inline-block">
    <div style="width:1080px; height:81px; float:left; background:#FFF" >
      <div class="shell_side"></div>
      <div style="width:1064px; float:left;" >
        <div style="float:left; width:300px; height:73px"></div>
        <div style="float:left;width:764px; height:25px;background-image: url(../imagesPages/shell_fichiers/grismenu_h3-2.gif); ">
          <div class="menu" style="float:right;"> <a  href="admin.myprofile">MON&nbsp;PROFIL</a> <span></span> <a  href="admin.users">UTILISATEURS</a> <span></span> <a  href="admin.groups">GROUPES</a><a class="Menu" href="backoffice.equipiers"></a> <span></span> <a  href="admin.roles">ROLES</a> <span></span><a  href="admin.objects">Objets</a> <span></span><a  href="admin.files">Fichiers</a> <span></span><a href="0" ><img src="../imagesPages/shell_fichiers/deco_h3-3.gif" alt="Deconnexion" name="deco_survolée"  title="Deconnexion" border="0" height="24
      " width="28" /></a></div>
        </div>
        <div style="float:left;width:764px; height:48px;background-image: url(../imagesPages/shell_fichiers/degradevert_h2-3.gif); "><!-- InstanceBeginEditable name="Sous menu" -->
          <bleetz:block name="menu">
  <div class="chemin" ><a  href="admin.ressources">Ressources</a> &gt; <a href="admin.rscShow?obj_id={$obj_id}">{$obj_controller} {$obj_nature}</a> &gt; Informations</div>
  <div class="menu" style="float:right;"> <a class="Menu" href="admin.RscInfosList?obj_id={$obj_id}">Informations</a> <span></span> <a class="Menu" href="#">Images</a><span></span> <a class="Menu" href="#">Fichiers</a><span></span> <a class="Menu" href="admin.RscUpdate?obj_id={$obj_id}">Modifier</a><span></span> <a class="Menu" href="admin.RscDelete?obj_id={$obj_id}">Supprimer</a></div>
          </bleetz:block>
        <!-- InstanceEndEditable --></div>
        <div class="shell_separator"> </div >
      </div>
      <div  class="shell_side"></div>
    </div>
    <div style="width:1080px; height:500px;  float:left; background:#FFF;">
      <div  class="shell_side"></div>
      <div style="float:left; width:1064px;height:500px;text-align:center;overflow:scroll;" >
        <div style="text-align:left;  display:inline-block"><!-- InstanceBeginEditable name="contenu" -->
 <p>Bloc addform en dessous </p>

<bleetz:block name="rscaddInfoform">
  <div class="w2ui-page page-0">
				<div class="w2ui-label">hook : </div>
    <div class="w2ui-field">
				<input name="inf_hook" type="text" id="inf_hook" size="35"/>
    </div>

  </div>
  <div class="w2ui-buttons">
    <input type="button" value="Annuler" name="reset" />
    <input type="button" value="Enregistrer" name="save">
  </div>
</bleetz:block>
  <p>Bloc contenu en dessous </p>
  <bleetz:block name="content" comment="Liste des roles" >
  <div style="padding: 5px; width: 800px; display inline-block;">
  
<div id="grid" style="width: 100%; height: 400px;"></div>	
<script>
$(function () {
$('#grid').w2grid({ 
	name: 'rsc-infos-list', 
	url: 'system.rscW2ui',
	limit: 20,
	show: {
		toolbar: true,
		footer: true, 
		toolbarAdd: true,
		toolbarSave: true,
		toolbarDelete: true,
	},
	postData: {
		obj_id : '{$obj_id}', 
	},
	searches: [				
		{ field: 'obj_controller', caption: 'Login', type: 'text' },
	],
		columns: [				
		{ field: 'inf_id', caption: 'Id information', size: '15%' },
		{ field: 'obj_id', caption: 'Id ressource', size: '25%'
		},
		{ field: 'inf_lang', caption: 'Langue', size: '40%',  },
		{ field: 'inf_value_char', caption: 'Texte', size: '40%',  },
		{ field: '', caption: '', size: '20%', 
		render: function (record, index) { return '<a href="admin.rscShow?obj_id='+record.obj_id+'">détails</a>' } 
		 },
	],
	onAdd: function(target, eventData) {
		openPopup();
	},
});
//<bleetz:debug>
w2ui['rsc-infos-list'].on('load', function(target, eventData) {
	console.log(eventData);
});
});
//</bleetz:debug>
</script>
  <script>
$().w2form({
		name: 'rsc-info-add',
		style: 'border: 0px; background-color: transparent;',
		url  : 'system.rscW2ui',
		formHTML: 
			'<bleetz:content name="rscaddInfoform" mode="s"></bleetz:content>',
		fields: [
			{ name: 'inf_hook', type: 'text', required: true },
		],
			record: {
				'obj_id':'{$obj_id}',
			},
		actions: {
			reset : function () { this.clear();$().w2popup('close'); },
			save  : function () {
					var obj = this;
					this.save({}, function (data) { 
						if (data.status == 'error') {
							console.log('ERROR: '+ data.message);
							return;
						} else if  (data.status == 'success') {
							console.log('SUCCESS: '+ data.message);
							$('#grid').w2render("rsc-infos-list");
							$().w2popup('close');
							//window.location.href=data.record.url;
							return;
						}
						obj.clear();
					});
				},
			}
	});
function openPopup () {
	
	$().w2popup('open', {
		title   : 'Information',
		showClose: false,
		body    : '<div id="form" style="width: 100%; height: 100%;"></div>',
		style   : 'padding: 15px 0px 0px 0px',
		width   : 400,
		height  : 200, 
		onOpen  : function () {
			$('#w2ui-popup #form').w2render('rsc-info-add');
		},
	});
//<bleetz:debug>
	w2ui['rsc-info-add'].on('save', function(target, eventData) {
	console.log(eventData);
});
//</bleetz:debug>
}
</script>
</div>
</bleetz:block > 



<!-- InstanceEndEditable --></div>
      </div>
      <div  class="shell_side"></div>
    </div>
    <div style="width:1080px; height:9px;  float:left; background:#FFF;">
      <div  class="shell_bt_c_l"></div>
      <div class="shell_separator" > </div>
      <div  class="shell_bt_c_r"></div>
    </div>
  </div>
</div>
</body>
<!-- InstanceEnd --></html>